#!/bin/bash

# Broker MQTT y t√≥pico
BROKER="broker.hivemq.com"
PORT=1883
TOPIC="SCF/sejuja/data/aceleracion"

# Mensaje con 64 muestras
MESSAGE='{
  "l": 64,
  "s": [
    {"t": "01-01-01T01:04:03.000", "a": [96, 56, 1033]},
    {"t": "01-01-01T01:04:03.019", "a": [90, 54, 1038]},
    {"t": "01-01-01T01:04:03.038", "a": [74, 58, 1035]},
    {"t": "01-01-01T01:04:03.057", "a": [66, 62, 1031]},
    {"t": "01-01-01T01:04:03.076", "a": [69, 61, 1033]},
    {"t": "01-01-01T01:04:03.095", "a": [82, 58, 1039]},
    {"t": "01-01-01T01:04:03.114", "a": [89, 56, 1038]},
    {"t": "01-01-01T01:04:03.133", "a": [93, 58, 1047]},
    {"t": "01-01-01T01:04:03.152", "a": [84, 63, 1042]},
    {"t": "01-01-01T01:04:03.171", "a": [80, 70, 1035]},
    {"t": "01-01-01T01:04:03.190", "a": [76, 65, 1025]},
    {"t": "01-01-01T01:04:03.209", "a": [80, 62, 1027]},
    {"t": "01-01-01T01:04:03.228", "a": [83, 59, 1029]},
    {"t": "01-01-01T01:04:03.247", "a": [86, 58, 1033]},
    {"t": "01-01-01T01:04:03.266", "a": [111, 86, 1031]},
    {"t": "01-01-01T01:04:03.285", "a": [172, 157, 1051]},
    {"t": "01-01-01T01:04:03.304", "a": [-72, -133, 865]},
    {"t": "01-01-01T01:04:03.323", "a": [-16, 64, 1247]},
    {"t": "01-01-01T01:04:03.342", "a": [174, 244, 1090]},
    {"t": "01-01-01T01:04:03.361", "a": [65, -157, 886]},
    {"t": "01-01-01T01:04:03.380", "a": [199, 174, 997]},
    {"t": "01-01-01T01:04:03.399", "a": [109, 47, 1086]},
    {"t": "01-01-01T01:04:03.418", "a": [10, 78, 1098]},
    {"t": "01-01-01T01:04:03.437", "a": [15, 64, 1012]},
    {"t": "01-01-01T01:04:03.456", "a": [57, 38, 1028]},
    {"t": "01-01-01T01:04:03.475", "a": [115, 52, 1030]},
    {"t": "01-01-01T01:04:03.494", "a": [120, 59, 1021]},
    {"t": "01-01-01T01:04:03.513", "a": [120, 68, 1071]},
    {"t": "01-01-01T01:04:03.532", "a": [81, 72, 1057]},
    {"t": "01-01-01T01:04:03.551", "a": [58, 67, 1021]},
    {"t": "01-01-01T01:04:03.570", "a": [48, 48, 990]},
    {"t": "01-01-01T01:04:03.589", "a": [74, 58, 1024]},
    {"t": "01-01-01T01:04:03.608", "a": [86, 48, 1042]},
    {"t": "01-01-01T01:04:03.627", "a": [99, 63, 1056]},
    {"t": "01-01-01T01:04:03.646", "a": [94, 57, 1048]},
    {"t": "01-01-01T01:04:03.665", "a": [79, 63, 1038]},
    {"t": "01-01-01T01:04:03.684", "a": [66, 67, 1023]},
    {"t": "01-01-01T01:04:03.703", "a": [62, 67, 1026]},
    {"t": "01-01-01T01:04:03.722", "a": [75, 61, 1035]},
    {"t": "01-01-01T01:04:03.741", "a": [92, 56, 1043]},
    {"t": "01-01-01T01:04:03.760", "a": [99, 53, 1043]},
    {"t": "01-01-01T01:04:03.779", "a": [93, 61, 1045]},
    {"t": "01-01-01T01:04:03.798", "a": [80, 66, 1039]},
    {"t": "01-01-01T01:04:03.817", "a": [71, 66, 1030]},
    {"t": "01-01-01T01:04:03.836", "a": [73, 65, 1025]},
    {"t": "01-01-01T01:04:03.855", "a": [82, 61, 1026]},
    {"t": "01-01-01T01:04:03.874", "a": [90, 59, 1036]},
    {"t": "01-01-01T01:04:03.893", "a": [190, 169, 1052]},
    {"t": "01-01-01T01:04:03.912", "a": [45, -16, 982]},
    {"t": "01-01-01T01:04:03.931", "a": [-145, -87, 933]},
    {"t": "01-01-01T01:04:03.950", "a": [217, 208, 1386]},
    {"t": "01-01-01T01:04:03.969", "a": [33, 3, 855]},
    {"t": "01-01-01T01:04:03.988", "a": [169, 8, 989]},
    {"t": "01-01-01T01:04:04.007", "a": [121, 153, 991]},
    {"t": "01-01-01T01:04:04.026", "a": [60, 34, 1147]},
    {"t": "01-01-01T01:04:04.045", "a": [14, 90, 1026]},
    {"t": "01-01-01T01:04:04.064", "a": [58, 40, 1025]},
    {"t": "01-01-01T01:04:04.083", "a": [87, 42, 1022]},
    {"t": "01-01-01T01:04:04.102", "a": [125, 69, 1051]},
    {"t": "01-01-01T01:04:04.121", "a": [102, 59, 1039]},
    {"t": "01-01-01T01:04:04.140", "a": [92, 74, 1065]},
    {"t": "01-01-01T01:04:04.159", "a": [58, 69, 1028]},
    {"t": "01-01-01T01:04:04.178", "a": [63, 57, 999]},
    {"t": "01-01-01T01:04:04.197", "a": [75, 61, 1006]}
  ]
}'

# Publicar el mensaje
mosquitto_pub -h $BROKER -p $PORT -t $TOPIC -m "$MESSAGE"
